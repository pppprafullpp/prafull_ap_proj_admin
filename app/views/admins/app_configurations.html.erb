<%=render :partial=>"layouts/header"%>
<%=render :partial=>"layouts/left_panel"%>
<section class="main-content-wrapper column">
   <section id="main-content">
        <div class="row">
           <div class="col-md-12">
             <%= render :partial => "layouts/breadcrumb", :locals => {:breadcrumb => @breadcrumb}%>
           <h1 class="h1"><i class="fa fa-cog"></i> App Configurations</h1>
       </div>
       </div>
       <div class="row">
             <div class="col-md-12">
                 <div class="panel panel-default">
                   <div class="panel-heading">
                     <h3 class="panel-title">App Configurations</h3>
                     <div class="actions pull-right">
                         <i class="fa fa-chevron-down"></i>
                     </div>
                   </div>
                   <div class="panel-body">

                     <div class="row">
                       <div class="col-md-4">
                         Update Social Data in
                       </div>
                       <div class="col-md-4">
                         <table style="width:100%">
                           <tr>
                             <td><input type="text" id="update_social_data_value"  value="<%=@update_social_data%>" class="form-control" /></td>
                             <td><span style="margin-left: -57px;border-left: 1px solid #000;padding-left: 2px;">&nbsp;Hours</span></td>
                           </tr>
                         </table>
                       </div>
                       <div class="col-md-4 ext-margin20">
                         <input type="button" class="btn btn-primary" onclick="update_app_configurations($('#update_social_data_value').val(),1)" value="Update">
                       </div>
                     </div>

                     <div class="row">
                       <div class="col-md-4">
                         Facebook Access token
                       </div>
                       <div class="col-md-4">
                         <table style="width:100%">
                           <tr>
                             <td><input type="text" id="update_fb_access_token"  value="<%=@facebook_token%>" class="form-control" /></td>
                            </tr>
                         </table>
                       </div>
                       <div class="col-md-4 ext-margin20">
                         <input type="button" class="btn btn-primary" onclick="update_app_configurations($('#update_fb_access_token').val(),2)" value="Update">
                       </div>
                     </div>

                     <div class="row">
                       <div class="col-md-4">
                         Instagram Access token
                       </div>
                       <div class="col-md-4">
                         <table style="width:100%">
                           <tr>
                             <td><input type="text" id="update_ig_access_token"  value="<%=@instagram_token%>" class="form-control" /></td>
                            </tr>
                         </table>
                       </div>
                       <div class="col-md-4 ext-margin20">
                         <input type="button" class="btn btn-primary" onclick="update_app_configurations($('#update_ig_access_token').val(),3)" value="Update">
                       </div>
                     </div>

                </div>
              </div>
         </div>
     </div>
   </section>
</section>
<script>
function update_app_configurations(data,type){
  type = parseInt(type)
  switch(type){
    case 1:
    config_key = "update_social_data",
    config_value = data;
    break;
    case 2: config_key = "facebook_access_token",
    config_value = data;
    break;
    case 3: config_key = "instagram_access_token",
    config_value = data;
    break;
   }
  response = make_changes_in_app_configurations(config_key,config_value)
  console.log(response);
  if( response["success"] == true) {
      alert("updated");
  }
}
</script>
